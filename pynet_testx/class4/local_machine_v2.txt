###See the code for local_machine_v2.py:
#!/usr/bin/env python
'''
Simple script to connect to my servers and execute shell commands,
to monitor CPU, memory and harddrive usage.
'''
import paramiko
from getpass import getpass

ip_addr = '127.0.0.1'
username = input(str('Enter username: '))
#username = 'breadfan'
password = getpass()
timeout = 15
port = 22
command_to_run = 'uptime'

def conn_to_host():
    try:
        print 'Establishing SSH connection...'
        ssh = paramiko.SSHClient()
        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        ssh.connect(ip_addr, username=username, password=password, timeout=timeout)
        print('Connection established with host ip address: %s') %(ip_addr)
        ssh_conn = ssh.invoke_shell()
        outp = ssh_conn.recv(5000)
        print outp
        ssh_conn.send(command_to_run)
        outp = ssh_conn.recv(5000)
        print outp
        print 20 * '*'
        outp

        #type(stdin)
        #print('Output of %s command ran on the remote host is: ...') %(command_to_run)
        #print stdout.readlines() 
    except:
        print('Error occured')

conn_to_host()


###Now see the output of the code:

breadfan@breadfan-ThinkPad-X200T:~/Programming/Python/pynet/git/pynet_testx/class4$ python local_machine_v2.py 
Enter username: 'breadfan'
Password: 
Establishing SSH connection...
Connection established with host ip address: 127.0.0.1
Welcome to Ubuntu 16.04.1 LTS (GNU/Linux 4.4.0-36-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

16 packages can be updated.
7 updates are security updates.


uptime
********************
breadfan@breadfan-ThinkPad-X200T:~/Programming/Python/pynet/git/pynet_testx/class4$ 

